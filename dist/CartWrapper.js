(window["wpshopifyComponents"] = window["wpshopifyComponents"] || []).push([["CartWrapper"],{

/***/ "./components/cart/wrapper/index.jsx":
/*!*******************************************!*\
  !*** ./components/cart/wrapper/index.jsx ***!
  \*******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"./node_modules/@babel/runtime/regenerator/index.js\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"./node_modules/@babel/runtime/helpers/asyncToGenerator.js\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"./node_modules/@babel/runtime/helpers/slicedToArray.js\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _state_context__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../_state/context */ \"./components/cart/_state/context.js\");\n/* harmony import */ var _shop_state_context__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../shop/_state/context */ \"./components/shop/_state/context.js\");\n/* harmony import */ var _common_hooks__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../common/hooks */ \"./common/hooks/index.js\");\n/* harmony import */ var lodash_isEmpty__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! lodash/isEmpty */ \"./node_modules/lodash/isEmpty.js\");\n/* harmony import */ var lodash_isEmpty__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(lodash_isEmpty__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _wpshopify_api__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! /Users/andrew/www/devil/devilbox-new/data/www/wpshopify-api */ \"/Users/andrew/www/devil/devilbox-new/data/www/wpshopify-api\");\n/* harmony import */ var _wpshopify_api__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_wpshopify_api__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var await_to_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! await-to-js */ \"./node_modules/await-to-js/dist/await-to-js.es5.js\");\n\n\n\n // import { CartHeader } from '../header'\n// import { CartContents } from '../contents'\n// import { CartFooter } from '../footer'\n// import { CartButtons } from '../buttons'\n\n\n\n\n\n\n\nvar CartHeader = react__WEBPACK_IMPORTED_MODULE_3___default.a.lazy(function () {\n  return __webpack_require__.e(/*! import() | CartHeader */ \"CartHeader\").then(__webpack_require__.bind(null, /*! ../header */ \"./components/cart/header/index.jsx\"));\n});\nvar CartContents = react__WEBPACK_IMPORTED_MODULE_3___default.a.lazy(function () {\n  return __webpack_require__.e(/*! import() | CartContents */ \"CartContents\").then(__webpack_require__.bind(null, /*! ../contents */ \"./components/cart/contents/index.jsx\"));\n});\nvar CartFooter = react__WEBPACK_IMPORTED_MODULE_3___default.a.lazy(function () {\n  return __webpack_require__.e(/*! import() | CartFooter */ \"CartFooter\").then(__webpack_require__.bind(null, /*! ../footer */ \"./components/cart/footer/index.jsx\"));\n});\nvar CartButtons = react__WEBPACK_IMPORTED_MODULE_3___default.a.lazy(function () {\n  return __webpack_require__.e(/*! import() | CartButtons */ \"CartButtons\").then(__webpack_require__.bind(null, /*! ../buttons */ \"./components/cart/buttons/index.jsx\"));\n});\n\nfunction CartWrapper() {\n  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useContext\"])(_state_context__WEBPACK_IMPORTED_MODULE_4__[\"CartContext\"]),\n      _useContext2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useContext, 2),\n      cartState = _useContext2[0],\n      cartDispatch = _useContext2[1];\n\n  var _useContext3 = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useContext\"])(_shop_state_context__WEBPACK_IMPORTED_MODULE_5__[\"ShopContext\"]),\n      _useContext4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_useContext3, 1),\n      shopState = _useContext4[0];\n\n  var cart = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useRef\"])();\n  var isFirstRender = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useRef\"])(true);\n  var updateCheckoutAttributes = Object(_common_hooks__WEBPACK_IMPORTED_MODULE_6__[\"useAction\"])('update.checkout.attributes');\n  var setCheckoutAttributes = Object(_common_hooks__WEBPACK_IMPORTED_MODULE_6__[\"useAction\"])('set.checkout.attributes');\n  var setCheckoutNotes = Object(_common_hooks__WEBPACK_IMPORTED_MODULE_6__[\"useAction\"])('set.checkout.note');\n  var lineItems = Object(_common_hooks__WEBPACK_IMPORTED_MODULE_6__[\"useAction\"])('product.addToCart');\n\n  function cartBootstrap() {\n    return _cartBootstrap.apply(this, arguments);\n  }\n\n  function _cartBootstrap() {\n    _cartBootstrap = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()(\n    /*#__PURE__*/\n    _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {\n      var _ref, _ref2, lineItemsError, lineItems;\n\n      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (shopState.checkoutId) {\n                _context.next = 2;\n                break;\n              }\n\n              return _context.abrupt(\"return\");\n\n            case 2:\n              _context.next = 4;\n              return Object(await_to_js__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(Object(_wpshopify_api__WEBPACK_IMPORTED_MODULE_8__[\"getProductIdsFromLineItems\"])());\n\n            case 4:\n              _ref = _context.sent;\n              _ref2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_ref, 2);\n              lineItemsError = _ref2[0];\n              lineItems = _ref2[1];\n\n              if (lineItemsError) {\n                shopDispatch({\n                  type: 'UPDATE_NOTICES',\n                  payload: {\n                    type: 'error',\n                    message: lineItemsError\n                  }\n                });\n              }\n\n              cartDispatch({\n                type: 'SET_CHECKOUT_CACHE',\n                payload: {\n                  checkoutId: shopState.checkoutId\n                }\n              });\n              cartDispatch({\n                type: 'SET_LINE_ITEMS_AND_VARIANTS',\n                payload: {\n                  lineItems: {\n                    products: lineItems\n                  },\n                  checkoutId: shopState.checkoutId\n                }\n              });\n\n              if (lodash_isEmpty__WEBPACK_IMPORTED_MODULE_7___default()(lineItems)) {\n                cartDispatch({\n                  type: 'SET_IS_CART_EMPTY',\n                  payload: true\n                });\n              } else {\n                cartDispatch({\n                  type: 'SET_IS_CART_EMPTY',\n                  payload: false\n                });\n              }\n\n              cartDispatch({\n                type: 'SET_IS_CART_READY',\n                payload: true\n              });\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _cartBootstrap.apply(this, arguments);\n  }\n\n  Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useEffect\"])(function () {\n    cartBootstrap();\n  }, [shopState.checkoutId]);\n  Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useEffect\"])(function () {\n    if (isFirstRender.current) {\n      isFirstRender.current = false;\n      return;\n    }\n\n    cartDispatch({\n      type: 'UPDATE_CHECKOUT_ATTRIBUTES',\n      payload: updateCheckoutAttributes\n    });\n  }, [updateCheckoutAttributes]);\n  Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useEffect\"])(function () {\n    if (isFirstRender.current) {\n      isFirstRender.current = false;\n      return;\n    }\n\n    cartDispatch({\n      type: 'SET_CHECKOUT_ATTRIBUTES',\n      payload: setCheckoutAttributes\n    });\n  }, [setCheckoutAttributes]);\n  Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useEffect\"])(function () {\n    if (isFirstRender.current) {\n      isFirstRender.current = false;\n      return;\n    }\n\n    cartDispatch({\n      type: 'SET_CHECKOUT_NOTE',\n      payload: setCheckoutNotes\n    });\n  }, [setCheckoutNotes]);\n  Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useEffect\"])(function () {\n    if (isFirstRender.current) {\n      isFirstRender.current = false;\n      return;\n    }\n\n    if (lineItems) {\n      cartDispatch({\n        type: 'UPDATE_LINE_ITEMS_AND_VARIANTS',\n        payload: lineItems\n      });\n      cartDispatch({\n        type: 'TOGGLE_CART',\n        payload: true\n      });\n    }\n\n    if (lodash_isEmpty__WEBPACK_IMPORTED_MODULE_7___default()(lineItems)) {\n      cartDispatch({\n        type: 'SET_IS_CART_EMPTY',\n        payload: true\n      });\n    } else {\n      cartDispatch({\n        type: 'SET_IS_CART_EMPTY',\n        payload: false\n      });\n    }\n  }, [lineItems]);\n  return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(\"section\", {\n    ref: cart,\n    className: \"wps-cart\"\n  }, react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(CartButtons, null), react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(CartHeader, null), react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(CartContents, {\n    isCartEmpty: cartState.isCartEmpty,\n    checkoutCache: cartState.checkoutCache\n  }), react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(CartFooter, null));\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (CartWrapper);\n\n//# sourceURL=webpack://wpshopifyComponents/./components/cart/wrapper/index.jsx?");

/***/ })

}]);