(window["wpshopifyComponents"] = window["wpshopifyComponents"] || []).push([["ProductOptionTrigger"],{

/***/ "./components/products/product/buy-button/option/trigger/index.jsx":
/*!*************************************************************************!*\
  !*** ./components/products/product/buy-button/option/trigger/index.jsx ***!
  \*************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"./node_modules/@babel/runtime/helpers/slicedToArray.js\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _state_context__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../_state/context */ \"./components/products/product/buy-button/_state/context.js\");\n/* harmony import */ var _common_animations__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../../common/animations */ \"./common/animations/index.js\");\n/* harmony import */ var _common_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../../common/utils */ \"./common/utils/index.js\");\n/* harmony import */ var _shop_state_context__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../shop/_state/context */ \"./components/shop/_state/context.js\");\n/* harmony import */ var _items_state_context__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../items/_state/context */ \"./components/items/_state/context.js\");\n/* harmony import */ var _state_context__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../_state/context */ \"./components/products/product/buy-button/option/_state/context.js\");\n/* harmony import */ var _state_context__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../_state/context */ \"./components/products/product/_state/context.js\");\n\n\n\n\n\n\n\n\n\n\nfunction ProductOptionTrigger() {\n  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useContext\"])(_shop_state_context__WEBPACK_IMPORTED_MODULE_5__[\"ShopContext\"]),\n      _useContext2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_useContext, 1),\n      shopState = _useContext2[0];\n\n  var _useContext3 = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useContext\"])(_items_state_context__WEBPACK_IMPORTED_MODULE_6__[\"ItemsContext\"]),\n      _useContext4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_useContext3, 1),\n      itemsState = _useContext4[0];\n\n  var _useContext5 = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useContext\"])(_state_context__WEBPACK_IMPORTED_MODULE_2__[\"ProductBuyButtonContext\"]),\n      _useContext6 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_useContext5, 2),\n      buyButtonState = _useContext6[0],\n      buyButtonDispatch = _useContext6[1];\n\n  var _useContext7 = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useContext\"])(_state_context__WEBPACK_IMPORTED_MODULE_7__[\"ProductOptionContext\"]),\n      _useContext8 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_useContext7, 2),\n      productOptionState = _useContext8[0],\n      productOptionDispatch = _useContext8[1];\n\n  var _useContext9 = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useContext\"])(_state_context__WEBPACK_IMPORTED_MODULE_8__[\"ProductContext\"]),\n      _useContext10 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_useContext9, 2),\n      productState = _useContext10[0],\n      productDispatch = _useContext10[1];\n\n  var dropdownTrigger = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useRef\"])();\n  var animePulse = Object(_common_animations__WEBPACK_IMPORTED_MODULE_3__[\"useAnime\"])(_common_animations__WEBPACK_IMPORTED_MODULE_3__[\"pulse\"]);\n  var isFirstRender = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useRef\"])(true);\n\n  function onClick() {\n    Object(_common_utils__WEBPACK_IMPORTED_MODULE_4__[\"hasHooks\"])() && wp.hooks.doAction('before.product.variantDropdown.toggle', productOptionState);\n    productOptionDispatch({\n      type: 'TOGGLE_DROPDOWN',\n      payload: !productOptionState.isDropdownOpen\n    });\n    productDispatch({\n      type: 'TOGGLE_DROPDOWN',\n      payload: !productState.isDropdownOpen\n    });\n  }\n  /*\n   When buyButtonState.missingSelections changes ...\n   */\n\n\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    if (!shopState.isShopReady) {\n      return;\n    }\n\n    if (isFirstRender.current) {\n      isFirstRender.current = false;\n      return;\n    }\n\n    if (!buyButtonState.missingSelections) {\n      return;\n    }\n\n    if (!isOptionSelected()) {\n      buyButtonDispatch({\n        type: 'SET_MISSING_SELECTIONS',\n        payload: false\n      });\n      animePulse(dropdownTrigger.current);\n    }\n  }, [buyButtonState.missingSelections]);\n\n  function isOptionSelected() {\n    return productOptionState.isOptionSelected;\n  }\n\n  function optionName() {\n    return productOptionState.option.name;\n  }\n\n  function getOptionName(selectedOption, option) {\n    return selectedOption[option.name];\n  }\n\n  function getSelectedOption() {\n    return productOptionState.selectedOption;\n  }\n\n  function optionNameWithSelect() {\n    return optionName() + ': ' + getOptionName(getSelectedOption(), productOptionState.option);\n  }\n\n  function displayOptionName() {\n    return isOptionSelected() ? optionNameWithSelect() : optionName();\n  }\n\n  return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(\"a\", {\n    href: \"#!\",\n    className: \"wps-btn wps-icon wps-icon-dropdown wps-modal-trigger\",\n    \"data-option\": \"\",\n    \"data-option-id\": \"\",\n    \"data-wps-is-ready\": shopState.isShopReady ? '1' : '0',\n    onClick: onClick,\n    ref: dropdownTrigger,\n    style: {\n      backgroundColor: itemsState.componentOptions.variantButtonColor\n    }\n  }, displayOptionName());\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (ProductOptionTrigger);\n\n//# sourceURL=webpack://wpshopifyComponents/./components/products/product/buy-button/option/trigger/index.jsx?");

/***/ })

}]);